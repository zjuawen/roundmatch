<!--miniprogram/pages/clubs/clubList.wxml-->

<mp-navigation-bar loading="{{loading}}" show="{{true}}" title="{{title}}" background="{{'white'}}" back="{{false}}" ></mp-navigation-bar>

<!--  

<view class="list">
  <button 
    open-type="getUserInfo" 
    bindgetuserinfo="onGetUserInfo"
    class="userinfo-avatar"
    style="background-image: url({{avatarUrl}})"
    size="default"
  /> 
</view> -->

<!-- 
<view class="page__bd">
  <mp-searchbar 
    bindselectresult="selectResult" 
    search="{{search}}" 
    bindinput="searchInput"
    placeholder="{{'搜索俱乐部'}}" >
    </mp-searchbar>
</view> -->

<view wx:if="{{(clubs.length>0)}}" class="weui-cells__title">加入的俱乐部</view>
<view 
	wx:for="{{ clubs }}"
  wx:key="{{ item._id }}"
	class="uploader" 
  style="padding-left: 0px; margin-top: 0px; margin-bottom: 20rpx;"  >

	<navigator url="../matches/matchList?clubid={{item._id}}" 
    open-type="navigate" class="uploader-text">

    <view style="display: flex; align-items: center; margin-left: 20rpx;">
      
      <image class='avatar' style="margin: 20rpx;" 
        src="../../images/default_club.png" mode="aspectFit">
      </image>
      
      <text style="flex:5" >{{item.wholeName}}</text>
      <text style="flex:5; align-content: left" > ({{item.shortName}})</text>
      <!-- <text style="flex:1" >{{item.createDate}}</text> -->

       <!-- <image class='avatar' style="margin: 20rpx; border-radius: 0px;" 
        src="../../images/locked.png" mode="aspectFit">
      </image> -->
    </view>

	</navigator>

</view>

<!-- 
<view wx:if="{{(publicClubs.length>0)}}" class="weui-cells__title">公开的俱乐部</view>
<view 
  wx:for="{{ publicClubs }}"
  wx:key="{{ item._id }}"
  wx:for-index="index" 
  class="uploader" 
  style="display: flex; flex-direction:row; padding-left: 20rpx; padding-top: 20rpx; padding-bottom: 20rpx; align-items: center;" >

    <image class='avatar-small' 
      src="../../images/default_club.png" mode="aspectFit">
    </image>

    <view style="flex:2; font-size: 14px; margin-left: 50rpx;" >{{item.wholeName}}</view>

    <image wx:if="{{item.locked}}" class='club-status' 
      src="../../images/locked.png" mode="aspectFit">
    </image>

    <button 
      wx:if="{{(!login)}}"
      class="weui-btn" type="primary" size="mini"
      data-item="{{item}}"
      open-type="getUserInfo" 
      bindgetuserinfo="onGetUserInfo"
      style="flex:1; margin-left: 40rpx; margin-right: 40rpx; font-size: 36rpx;" >
      加入
      </button>

    <button 
      wx:if="{{(login)}}"
      class="weui-btn" type="primary" size="mini"
      data-item="{{item}}"
      bindtap="onClickPublicClub"
      style="flex:1; margin-left: 40rpx; margin-right: 40rpx; font-size: 36rpx;"  >
      加入
      </button>
</view>
 -->
<!-- disabled="{{!createClubEnable}}" -->
<!--  {{createClubEnable? "创建自己的俱乐部" : "仅可以创建一个俱乐部"}} -->     
<button 
      wx:if="{{(login && createClubEnable)}}"
      class="weui-btn" type="primary" size="mini"
      bindtap="onCreateClub"
      style="flex:1; margin-Top: 40rpx; margin-left: 40rpx; margin-right: 40rpx; font-size: 36rpx;"  >
        创建自己的俱乐部
</button>

<button 
      wx:if="{{(debug)}}"
      class="weui-btn" type="primary" size="mini"
      bindtap="onClickDebug"
      style="flex:1; margin-Top: 40rpx; margin-left: 40rpx; margin-right: 40rpx; font-size: 36rpx;"  >
      测试
</button>

<view 
  style="display: flex; flex-direction:row; position:fixed; bottom:0; padding-bottom: 20rpx; align-items: center;" >
  
  <view 
      class="hyperlink-text" 
      bindtap="onClickDownloadManual" >
      查看用户手册
    </view>

</view>

<!-- 
<button 
  class="weui-btn" type="primary" 
  size="mini"
  style="margin-top: 50rpx" 
  bindtap="onNewClub">
  创建
</button>
-->


<mp-dialog title="获取授权" show="{{authDialogShow}}" bindbuttontap="onCancelAuthDialog" buttons="{{[{text: '取消'}]}}">
  <view style="margin: 40rpx;" >加入俱乐部需要用户昵称，头像等信息</view>
  <button 
    class="weui-btn" type="primary" size="default"
    open-type="getUserInfo" 
    bindgetuserinfo="onGetUserInfo">
    点击授权
    </button>
</mp-dialog>

<mp-dialog title="加入俱乐部" show="{{joinDialogShow}}" bindbuttontap="tapDialogButton" buttons="{{buttons}}">
  <block wx:if="{{!selected.locked}}">
    <view>确定要加入"{{selected.wholeName}}"?</view>
  </block>
  <block wx:else >
    <view class="dialog-content-container">
      <view>请输入"{{selected.wholeName}}"密码：</view>
      <input class="password-input" type="password" 
        bindinput="onInputPassword" bindchange="onInputPassword"></input>
    </view>
  </block>
</mp-dialog>

